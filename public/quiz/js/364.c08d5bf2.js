"use strict";(self["webpackChunkfix_quiz"]=self["webpackChunkfix_quiz"]||[]).push([[364],{6364:(l,e,a)=>{a.r(e),a.d(e,{default:()=>rl});var t=a(3673),o=a(2323);const d={class:"col"},n={class:"col-2"},u=(0,t.Uk)("预览/保存模板 "),i={class:"col"},c=(0,t.Uk)("单/多选项目 "),s=(0,t.Uk)(" 添加选择型测试项目（单/多选） "),m={class:"col"},p=(0,t.Uk)("标题/备注 "),r=(0,t.Uk)(" 添加标题（备注） "),v={class:"col"},w=(0,t.Uk)("自定义项目 "),g=(0,t.Uk)(" 添加数值/文字型测试项目 "),k={class:"col-1"},_=(0,t.Uk)("删除 "),f={key:0,class:"row q-col-gutter-md"},V={class:"col-3"},b={key:1,class:"row q-col-gutter-x-md"},h={class:"col-3"},q={key:2,class:"row q-col-gutter-md"},y={class:"col-3"},C={class:"col-1"},W=(0,t.Uk)("选项");function U(l,e,a,U,Z,D){const H=(0,t.up)("q-card-section"),Q=(0,t.up)("q-card"),x=(0,t.up)("q-input"),z=(0,t.up)("q-btn"),S=(0,t.up)("q-tooltip"),O=(0,t.up)("q-toggle"),K=(0,t.up)("q-separator"),T=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(T,{class:"q-pa-md"},{default:(0,t.w5)((()=>[(0,t.Wm)(Q,{flat:"",style:{height:"50px","background-color":"rgba(0, 0, 0, 0)"}},{default:(0,t.w5)((()=>[(0,t.Wm)(H,{class:"text-h5 q-pa-none"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)("create"==l.mode?"检修模板新建":"检修模板编辑"),1)])),_:1})])),_:1}),(0,t.Wm)(Q,{flat:""},{default:(0,t.w5)((()=>[(0,t.Wm)(H,{class:"row q-col-gutter-x-md"},{default:(0,t.w5)((()=>[(0,t._)("div",d,[(0,t.Wm)(x,{modelValue:l.quiz_name,"onUpdate:modelValue":e[0]||(e[0]=e=>l.quiz_name=e),outlined:"",label:"检修模板名称"},null,8,["modelValue"])]),(0,t._)("div",n,[(0,t.Wm)(z,{color:"primary",class:"full-width full-height",onClick:l.preview},{default:(0,t.w5)((()=>[u])),_:1},8,["onClick"])])])),_:1})])),_:1}),(0,t.Wm)(Q,{class:"q-mt-md",flat:""},{default:(0,t.w5)((()=>[(0,t.Wm)(H,{class:"row q-col-gutter-x-md q-pt-lg"},{default:(0,t.w5)((()=>[(0,t._)("div",i,[(0,t.Wm)(z,{icon:"add",color:"primary",class:"full-width",onClick:l.addCheck},{default:(0,t.w5)((()=>[c,(0,t.Wm)(S,{class:"bg-amber text-black shadow-4",offset:[10,20],anchor:"top middle",self:"center middle"},{default:(0,t.w5)((()=>[s])),_:1})])),_:1},8,["onClick"])]),(0,t._)("div",m,[(0,t.Wm)(z,{icon:"add",color:"primary",class:"full-width",onClick:l.addNote},{default:(0,t.w5)((()=>[p,(0,t.Wm)(S,{class:"bg-amber text-black shadow-4",offset:[10,20],anchor:"top middle",self:"center middle"},{default:(0,t.w5)((()=>[r])),_:1})])),_:1},8,["onClick"])]),(0,t._)("div",v,[(0,t.Wm)(z,{icon:"add",color:"primary",class:"full-width",onClick:l.addStandard},{default:(0,t.w5)((()=>[w,(0,t.Wm)(S,{class:"bg-amber text-black shadow-4",offset:[10,20],anchor:"top middle",self:"center middle"},{default:(0,t.w5)((()=>[g])),_:1})])),_:1},8,["onClick"])]),(0,t._)("div",k,[(0,t.Wm)(z,{color:"negative",disable:null===l.selected,class:"full-width",onClick:l.remove},{default:(0,t.w5)((()=>[_])),_:1},8,["disable","onClick"])])])),_:1}),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(l.base,((e,a)=>((0,t.wg)(),(0,t.iD)("div",{key:a},[(0,t.Wm)(H,{class:(0,o.C_)(a===l.selected?"bg-blue-1":""),onClick:e=>l.selected=a},{default:(0,t.w5)((()=>["standard"===e.type?((0,t.wg)(),(0,t.iD)("div",f,[(0,t._)("div",V,[(0,t.Wm)(x,{modelValue:e.data.name,"onUpdate:modelValue":l=>e.data.name=l,outlined:"",label:"项目名称"},null,8,["modelValue","onUpdate:modelValue"])]),(0,t._)("div",null,[(0,t.Wm)(z,{icon:"add",color:"primary",class:"full-height",onClick:l=>e.data.contents.push({content:"",label:"",standard:!1})},null,8,["onClick"])]),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.data.contents,((l,e)=>((0,t.wg)(),(0,t.iD)("div",{key:"f"+a+"_"+e,class:"col-2"},[(0,t.Wm)(x,{modelValue:l.label,"onUpdate:modelValue":e=>l.label=e,outlined:""},null,8,["modelValue","onUpdate:modelValue"])])))),128))])):(0,t.kq)("",!0),"note"===e.type?((0,t.wg)(),(0,t.iD)("div",b,[(0,t._)("div",h,[(0,t.Wm)(x,{modelValue:e.data.title,"onUpdate:modelValue":l=>e.data.title=l,outlined:"",label:"标题"},null,8,["modelValue","onUpdate:modelValue"])]),(0,t.Wm)(O,{modelValue:e.data.show_content,"onUpdate:modelValue":l=>e.data.show_content=l,label:"是否显示输入"},null,8,["modelValue","onUpdate:modelValue"])])):(0,t.kq)("",!0),"check"===e.type?((0,t.wg)(),(0,t.iD)("div",q,[(0,t._)("div",y,[(0,t.Wm)(x,{modelValue:e.data.name,"onUpdate:modelValue":l=>e.data.name=l,outlined:"",label:"项目名称"},null,8,["modelValue","onUpdate:modelValue"])]),(0,t._)("div",C,[(0,t.Wm)(z,{outline:"",class:"full-height full-width",icon:"add",color:"primary",onClick:a=>l.addOption(e.data)},{default:(0,t.w5)((()=>[W])),_:2},1032,["onClick"])]),(0,t.Wm)(O,{modelValue:e.data.multi,"onUpdate:modelValue":l=>e.data.multi=l,label:"是否多选"},null,8,["modelValue","onUpdate:modelValue"]),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.data.options,((l,o)=>((0,t.wg)(),(0,t.iD)("div",{key:a+"_"+o},[(0,t.Wm)(x,{modelValue:e.data.options[o],"onUpdate:modelValue":l=>e.data.options[o]=l,outlined:"",label:"选项"+(o+1)},null,8,["modelValue","onUpdate:modelValue","label"])])))),128))])):(0,t.kq)("",!0)])),_:2},1032,["class","onClick"]),(0,t.Wm)(K)])))),128))])),_:1})])),_:1})}var Z=a(1959),D=a(8825),H=a(8880);const Q={key:0,class:"row q-col-gutter-x-md"},x={class:"col-3"},z={key:1},S={class:"text-h6"},O={key:2,class:"row q-col-gutter-x-md"},K={class:"col-3"},T={key:0,class:"q-gutter-sm"},j={key:1,class:"q-gutter-sm"};function N(l,e,a,d,n,u){const i=(0,t.up)("q-card-section"),c=(0,t.up)("q-input"),s=(0,t.up)("q-checkbox"),m=(0,t.up)("q-radio"),p=(0,t.up)("q-separator"),r=(0,t.up)("q-card"),v=(0,t.up)("q-btn"),w=(0,t.up)("q-card-actions"),g=(0,t.up)("q-dialog");return(0,t.wg)(),(0,t.j4)(g,{ref:"dialogRef",onHide:d.onDialogHide,"full-width":""},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{class:"q-dialog-plugin"},{default:(0,t.w5)((()=>[(0,t.Wm)(i,{class:"text-h5"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(d.name)+"模板预览 ",1)])),_:1}),(0,t.Wm)(i,null,{default:(0,t.w5)((()=>[(0,t.Wm)(r,{flat:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(d.base,((l,e)=>((0,t.wg)(),(0,t.iD)("div",{key:e},[(0,t.Wm)(i,null,{default:(0,t.w5)((()=>["standard"===l.type?((0,t.wg)(),(0,t.iD)("div",Q,[(0,t._)("div",x,[(0,t.Wm)(c,{modelValue:l.data.name,"onUpdate:modelValue":e=>l.data.name=e,borderless:"",label:"项目名称",disable:""},null,8,["modelValue","onUpdate:modelValue"])]),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(l.data.contents,((l,a)=>((0,t.wg)(),(0,t.iD)("div",{key:"f"+e+"_"+a,class:"col-2"},[(0,t.Wm)(c,{modelValue:l.content,"onUpdate:modelValue":e=>l.content=e,outlined:"",label:l.label},null,8,["modelValue","onUpdate:modelValue","label"])])))),128))])):(0,t.kq)("",!0),"note"===l.type?((0,t.wg)(),(0,t.iD)("div",z,[(0,t._)("div",S,(0,o.zw)(l.data.title),1),(0,t._)("div",null,[(0,t.wy)((0,t.Wm)(c,{modelValue:l.data.content,"onUpdate:modelValue":e=>l.data.content=e,outlined:"",autogrow:""},null,8,["modelValue","onUpdate:modelValue"]),[[H.F8,l.data.show_content]])])])):(0,t.kq)("",!0),"check"===l.type?((0,t.wg)(),(0,t.iD)("div",O,[(0,t._)("div",K,[(0,t.Wm)(c,{disable:"",outlined:"",label:"项目名称",modelValue:l.data.name,"onUpdate:modelValue":e=>l.data.name=e},null,8,["modelValue","onUpdate:modelValue"])]),l.data.multi?((0,t.wg)(),(0,t.iD)("div",T,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(l.data.options,((a,o)=>((0,t.wg)(),(0,t.j4)(s,{modelValue:l.data.selections,"onUpdate:modelValue":e=>l.data.selections=e,val:a,label:a,color:"teal",key:e+"_"+o},null,8,["modelValue","onUpdate:modelValue","val","label"])))),128))])):((0,t.wg)(),(0,t.iD)("div",j,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(l.data.options,((a,o)=>((0,t.wg)(),(0,t.j4)(m,{modelValue:l.data.selection,"onUpdate:modelValue":e=>l.data.selection=e,val:a,label:a,color:"teal",key:e+"_"+o},null,8,["modelValue","onUpdate:modelValue","val","label"])))),128))]))])):(0,t.kq)("",!0)])),_:2},1024),(0,t.Wm)(p,{inset:""})])))),128))])),_:1})])),_:1}),(0,t.Wm)(w,{align:"right"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{color:"primary",outline:"",label:"关闭",onClick:d.onCancelClick},null,8,["onClick"]),(0,t.Wm)(v,{color:"primary",label:"保存",onClick:d.onOKClick},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["onHide"])}a(71);var Y=a(1701);const J={props:{quiz_name:String,quiz_data:String},emits:[...Y.Z.emits],setup(l){const e=(0,Z.iH)(l.quiz_name),a=(0,Z.iH)(JSON.parse(l.quiz_data)),{dialogRef:t,onDialogHide:o,onDialogOK:d,onDialogCancel:n}=(0,Y.Z)();return{name:e,base:a,dialogRef:t,onDialogHide:o,onOKClick(){d()},onCancelClick:n}}};var P=a(4260),R=a(5926),B=a(151),I=a(5589),A=a(8966),E=a(7030),F=a(8886),G=a(5735),L=a(7991),M=a(8240),X=a(5869),$=a(9367),ll=a(7518),el=a.n(ll);const al=(0,P.Z)(J,[["render",N]]),tl=al;el()(J,"components",{QDialog:R.Z,QCard:B.Z,QCardSection:I.Z,QInput:A.Z,QChip:E.Z,QToggle:F.Z,QCheckbox:G.Z,QRadio:L.Z,QBtn:M.Z,QSeparator:X.Z,QCardActions:$.Z});var ol=a(9582),dl=a(5474),nl=a(4259);const ul=(0,t.aZ)({name:"Edit",setup(){const l=(0,Z.iH)("create"),e=(0,Z.iH)(null),a=(0,Z.iH)(null),o=(0,D.Z)(),d=(0,ol.yj)(),n=(0,Z.iH)([]),u=(0,Z.iH)(null),i=(0,Z.iH)(null),c=()=>{n.value.splice(null!==i.value?i.value+1:n.value.length,0,{type:"standard",data:{name:"",contents:[]}}),i.value=null},s=()=>{n.value.splice(null!==i.value?i.value+1:n.value.length,0,{type:"note",data:{title:"",show_content:!1,content:""}}),i.value=null},m=()=>{n.value.splice(null!==i.value?i.value+1:n.value.length,0,{type:"check",data:{name:"",multi:!1,options:[],selection:null,selections:[]}}),i.value=null},p=l=>{l.options.push("")},r=()=>{n.value.splice(i.value,1),i.value=null},v=()=>{o.dialog({component:tl,componentProps:{quiz_name:w.value,quiz_data:JSON.stringify(n.value)}}).onOk((()=>{"create"===l.value?dl.apis.postTemplate({...d.query,business_type:1,account_id:u.value,name:w.value,data:[{data:JSON.stringify(n.value),uuid:(0,nl.Z)()}]}).then((()=>{o.notify({message:"模板创建成功",type:"positive"}),setTimeout((()=>{window.parent.jump()}),1500)})):"edit"===l.value&&dl.apis.patchTemplate(e.value,{...d.query,name:w.value,data:[{data:JSON.stringify(n.value),uuid:a.value}]}).then((()=>{o.notify({message:"模板修改成功",type:"positive"}),setTimeout((()=>{window.parent.jump()}),1500)}))})).onCancel((()=>{}))};(0,t.bv)((()=>{const{account_id:t,overhaul_template_id:o,overhaul_template_name:i}=d.query;o&&(w.value=i,l.value="edit",e.value=o,dl.apis.getTemplate(o).then((l=>{n.value=JSON.parse(l.data.data[0].data),a.value=l.data.data[0].uuid}))),u.value=t}));const w=(0,Z.iH)("");return{mode:l,base:n,addStandard:c,addNote:s,addCheck:m,addOption:p,preview:v,selected:i,remove:r,quiz_name:w}}});var il=a(4379),cl=a(8870),sl=a(9108),ml=a(5607);const pl=(0,P.Z)(ul,[["render",U]]),rl=pl;el()(ul,"components",{QPage:il.Z,QCard:B.Z,QCardSection:I.Z,QInput:A.Z,QBtn:M.Z,QTooltip:cl.Z,QPopupProxy:sl.Z,QBanner:ml.Z,QToggle:F.Z,QSeparator:X.Z})}}]);