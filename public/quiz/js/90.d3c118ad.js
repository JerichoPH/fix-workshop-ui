"use strict";(self["webpackChunkfix_quiz"]=self["webpackChunkfix_quiz"]||[]).push([[90],{5090:(e,l,a)=>{a.r(l),a.d(l,{default:()=>oe});var t=a(3673),o=a(8880),d=a(2323);const n=e=>((0,t.dD)("data-v-5ba53aca"),e=e(),(0,t.Cn)(),e),u=(0,t.Uk)(" 器材检修 "),s={key:0,class:"row q-col-gutter-sm"},i={class:"col-md-5 col-12"},c=(0,t.Uk)(" 器材基础信息 "),m=(0,t.Uk)("唯一编码:"),r=(0,t.Uk)("器材种类:"),p=(0,t.Uk)("器材类型:"),w=(0,t.Uk)("器材型号:"),_=(0,t.Uk)("供应商:"),f=(0,t.Uk)("状态:"),g={class:"col-md-7 col-12"},v=n((()=>(0,t._)("div",{class:"text-h6"},"器材履历",-1))),b={class:"col-5"},q=["innerHTML"],y={class:"text-right text-caption text-grey"},k={key:1},W={class:"q-pa-md bg-white rounded-borders row"},h={key:0,class:"row q-col-gutter-md"},U={class:"col-md-2 col-12"},V={key:1},x={key:2,class:"row q-col-gutter-md"},z={class:"col-md-3 col-12"},H={key:0,class:"q-gutter-sm column justify-center"},Z={class:"q-gutter-x-sm"},D={key:1,class:"q-gutter-sm column justify-center"},Q={class:"q-gutter-x-sm"},C=(0,t.Uk)("提交完成检修");function j(e,l,a,n,j,K){const O=(0,t.up)("q-space"),T=(0,t.up)("q-btn"),F=(0,t.up)("q-card-section"),S=(0,t.up)("q-card"),I=(0,t.up)("q-item-section"),Y=(0,t.up)("q-item"),J=(0,t.up)("q-btn-toggle"),N=(0,t.up)("q-timeline-entry"),B=(0,t.up)("q-timeline"),E=(0,t.up)("q-input"),L=(0,t.up)("q-checkbox"),M=(0,t.up)("q-radio"),A=(0,t.up)("q-card-actions"),P=(0,t.up)("q-page");return(0,t.wg)(),(0,t.j4)(P,{class:"q-pa-md"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(S,{flat:"",style:{height:"50px","background-color":"rgba(0, 0, 0, 0)"}},{default:(0,t.w5)((()=>[(0,t.Wm)(F,{class:"text-h5 q-pa-none row"},{default:(0,t.w5)((()=>[u,(0,t.Wm)(O),(0,t.Wm)(T,{icon:"fullscreen",onClick:e.toggleFullscreen,flat:""},null,8,["onClick"])])),_:1})])),_:1},512),[[o.F8,"quiz"===e.mode]]),(0,t.wy)((0,t._)("div",null,[e.scaned?((0,t.wg)(),(0,t.iD)("div",s,[(0,t._)("div",i,[(0,t.Wm)(S,{flat:""},{default:(0,t.w5)((()=>[(0,t.Wm)(F,{style:{height:"52px"},class:"text-h6 q-pb-none"},{default:(0,t.w5)((()=>[c])),_:1}),(0,t.Wm)(F,{style:{height:"260px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(Y,{dense:"",class:"q-px-md ellipsis"},{default:(0,t.w5)((()=>[(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[m])),_:1}),(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,d.zw)(e.info.unique_code),1)])),_:1})])),_:1}),(0,t.Wm)(Y,{dense:"",class:"q-px-md ellipsis"},{default:(0,t.w5)((()=>[(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[r])),_:1}),(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,d.zw)(e.info.category_name),1)])),_:1})])),_:1}),(0,t.Wm)(Y,{dense:"",class:"q-px-md ellipsis"},{default:(0,t.w5)((()=>[(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[p])),_:1}),(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,d.zw)(e.info.entire_model_name),1)])),_:1})])),_:1}),(0,t.Wm)(Y,{dense:"",class:"q-px-md ellipsis"},{default:(0,t.w5)((()=>[(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[w])),_:1}),(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,d.zw)(e.info.sub_model_name),1)])),_:1})])),_:1}),(0,t.Wm)(Y,{dense:"",class:"q-px-md ellipsis"},{default:(0,t.w5)((()=>[(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[_])),_:1}),(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,d.zw)(e.info.factory_name),1)])),_:1})])),_:1}),(0,t.Wm)(Y,{dense:"",class:"q-px-md ellipsis"},{default:(0,t.w5)((()=>[(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[f])),_:1}),(0,t.Wm)(I,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,d.zw)(e.info.state),1)])),_:1})])),_:1})])),_:1})])),_:1})]),(0,t._)("div",g,[(0,t.Wm)(S,{flat:""},{default:(0,t.w5)((()=>[(0,t.Wm)(F,{class:"row q-pb-none"},{default:(0,t.w5)((()=>[v,(0,t.Wm)(O),(0,t._)("div",b,[(0,t.Wm)(J,{modelValue:e.btn,"onUpdate:modelValue":l[0]||(l[0]=l=>e.btn=l),spread:"","no-caps":"",dark:"","toggle-color":"primary",color:"grey-4","text-color":"black",options:[{label:"全部",value:"all"},{label:"故障记录",value:"malfunction"}]},null,8,["modelValue"])])])),_:1}),(0,t.Wm)(F,{style:{height:"260px","overflow-y":"auto"}},{default:(0,t.w5)((()=>[(0,t.Wm)(B,{color:"primary"},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.logs.filter((l=>l.group_type==e.btn||"all"==e.btn)),((e,l)=>((0,t.wg)(),(0,t.j4)(N,{key:e.name+"_"+l},{title:(0,t.w5)((()=>[(0,t.Uk)((0,d.zw)(e.name),1)])),default:(0,t.w5)((()=>[(0,t._)("div",{innerHTML:e.description},null,8,q),(0,t._)("div",y,(0,d.zw)(e.date),1)])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})])])):((0,t.wg)(),(0,t.iD)("div",k,[(0,t._)("div",W,[(0,t.Wm)(E,{class:"col-12",outlined:"",label:"扫码检修",modelValue:e.code,"onUpdate:modelValue":l[1]||(l[1]=l=>e.code=l),autofocus:"",onKeydown:(0,o.D2)(e.scan,["enter"])},null,8,["modelValue","onKeydown"])])]))],512),[[o.F8,"quiz"===e.mode]]),(0,t.Wm)(S,{class:(0,d.C_)(["q-mt-md",e.scaned||"disin"]),style:{"background-color":"rgba(0, 0, 0, 0)"},flat:""},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.base,((e,l)=>((0,t.wg)(),(0,t.iD)("div",{key:l,class:"q-mb-sm"},[(0,t.Wm)(F,{class:"bg-white rounded-borders"},{default:(0,t.w5)((()=>["standard"===e.type?((0,t.wg)(),(0,t.iD)("div",h,[(0,t._)("div",U,[(0,t.Wm)(E,{modelValue:e.data.name,"onUpdate:modelValue":l=>e.data.name=l,borderless:"",label:"项目名称",disable:""},null,8,["modelValue","onUpdate:modelValue"])]),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.data.contents,((e,a)=>((0,t.wg)(),(0,t.iD)("div",{key:"f"+l+"_"+a,class:"col-md-2 col-12"},[(0,t.Wm)(E,{modelValue:e.content,"onUpdate:modelValue":l=>e.content=l,outlined:"",label:e.label},null,8,["modelValue","onUpdate:modelValue","label"])])))),128))])):(0,t.kq)("",!0),"note"===e.type?((0,t.wg)(),(0,t.iD)("div",V,[(0,t._)("div",{class:(0,d.C_)(e.data.show_content?"text-subtitle1":"text-h6")},(0,d.zw)(e.data.title),3),(0,t._)("div",null,[(0,t.wy)((0,t.Wm)(E,{modelValue:e.data.content,"onUpdate:modelValue":l=>e.data.content=l,outlined:"",autogrow:""},null,8,["modelValue","onUpdate:modelValue"]),[[o.F8,e.data.show_content]])])])):(0,t.kq)("",!0),"check"===e.type?((0,t.wg)(),(0,t.iD)("div",x,[(0,t._)("div",z,[(0,t.Wm)(E,{disable:"",outlined:"",label:"项目名称",modelValue:e.data.name,"onUpdate:modelValue":l=>e.data.name=l},null,8,["modelValue","onUpdate:modelValue"])]),e.data.multi?((0,t.wg)(),(0,t.iD)("div",H,[(0,t._)("div",Z,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.data.options,((a,o)=>((0,t.wg)(),(0,t.j4)(L,{modelValue:e.data.selections,"onUpdate:modelValue":l=>e.data.selections=l,val:a,label:a,color:"primary",key:l+"_"+o},null,8,["modelValue","onUpdate:modelValue","val","label"])))),128))])])):((0,t.wg)(),(0,t.iD)("div",D,[(0,t._)("div",Q,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.data.options,((a,o)=>((0,t.wg)(),(0,t.j4)(M,{modelValue:e.data.selection,"onUpdate:modelValue":l=>e.data.selection=l,val:a,label:a,color:"primary",key:l+"_"+o},null,8,["modelValue","onUpdate:modelValue","val","label"])))),128))])]))])):(0,t.kq)("",!0)])),_:2},1024)])))),128)),(0,t.wy)((0,t.Wm)(A,null,{default:(0,t.w5)((()=>[(0,t.Wm)(T,{class:"full-width",color:"primary",onClick:e.submit},{default:(0,t.w5)((()=>[C])),_:1},8,["onClick"])])),_:1},512),[[o.F8,"quiz"===e.mode]])])),_:1},8,["class"])])),_:1})}a(71);var K=a(1959),O=a(8825),T=a(9582),F=a(5474);const S=(0,t.aZ)({name:"Edit",setup(){const e=(0,K.iH)("quiz"),l=(0,O.Z)(),a=(0,T.yj)(),o=(0,K.iH)(!1),d=(0,K.iH)(""),n=(0,K.iH)(!1),u=(0,K.iH)([]),s=(0,K.iH)({}),i=(0,K.iH)([]),c=()=>{F.apis.getInfo(d.value).then((e=>{const{material_logs:l,breakdown_logs:a,info:t}=e.data.data;n.value=!0,s.value=t,console.log(...Object.values(l)),i.value=[...Object.values(l)[0],...Object.values(a)[0].map((e=>({...e,description:e.explain,group_type:"malfunction"})))]}))},m=()=>{o.value?l.fullscreen.exit().then((()=>{o.value=!1})):l.fullscreen.request().then((()=>{o.value=!0}))},r=()=>{F.apis.postQuiz({...a.query,material_unique_code:d.value,business_type:"1",account_id:w.value,data:JSON.stringify(u.value)}).then((()=>{l.notify({message:"检修完成",type:"positive"}),setTimeout((()=>{window.parent.jump()}),1500)}))},p=(0,K.iH)(""),w=(0,K.iH)(null);return(0,t.bv)((()=>{const{account_id:l,template_id:t,overhaul_id:o}=a.query;o?(e.value="view",F.apis.getOverhaul(o).then((e=>{u.value=JSON.parse(e.data.data.data)}))):(w.value=l,F.apis.getTemplate(t).then((e=>{u.value=JSON.parse(e.data.data[0].data)})))})),{code:d,scan:c,scaned:n,base:u,submit:r,quiz_name:p,info:s,mode:e,fullscreen:o,account:w,toggleFullscreen:m,btn:(0,K.iH)("all"),logs:i}}});var I=a(4260),Y=a(4379),J=a(151),N=a(5589),B=a(2025),E=a(8240),L=a(3414),M=a(2035),A=a(8761),P=a(1432),R=a(3424),G=a(8966),X=a(5735),$=a(7991),ee=a(9367),le=a(7518),ae=a.n(le);const te=(0,I.Z)(S,[["render",j],["__scopeId","data-v-5ba53aca"]]),oe=te;ae()(S,"components",{QPage:Y.Z,QCard:J.Z,QCardSection:N.Z,QSpace:B.Z,QBtn:E.Z,QItem:L.Z,QItemSection:M.Z,QBtnToggle:A.Z,QTimeline:P.Z,QTimelineEntry:R.Z,QInput:G.Z,QCheckbox:X.Z,QRadio:$.Z,QCardActions:ee.Z})}}]);